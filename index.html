<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Operations Report - Mining & Plant</title>
  <style>
    :root {
      --w: 1450px;
      --h: auto;
      --orange: #e67e22;
      --blue: #2980b9;
      --border: #000;
      --gray: #f8f9fa;
    }
    body {
      background: #ecf0f1;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: var(--w);
      margin: 0 auto;
    }
    .controls {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      margin-bottom: 20px;
    }
    .controls h3 {
      margin-top: 0;
      color: #2c3e50;
    }
    .input-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 12px;
      margin-bottom: 15px;
    }
    .input-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .input-row label {
      width: 200px;
      font-weight: 600;
      color: #34495e;
    }
    .input-row input {
      padding: 8px 10px;
      border: 1px solid #bdc3c7;
      border-radius: 4px;
      width: 100px;
      font-size: 14px;
    }
    .input-row input.full-width {
      width: auto;
      flex: 1;
    }
    button {
      background: var(--orange);
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
      margin: 0 10px;
    }
    button:hover {
      background: #d35400;
      transform: translateY(-2px);
    }
    .print-btn {
      background: var(--blue);
    }
    .print-btn:hover {
      background: #1f618d;
    }
    .share-btn {
      background: #25D366;
    }
    .share-btn:hover {
      background: #128C7E;
    }
    .report {
      background: #fff;
      padding: 20px;
      border: 3px solid var(--border);
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      min-height: var(--h);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 28px;
    }
    .date {
      text-align: center;
      color: #7f8c8d;
      font-weight: bold;
      margin-bottom: 20px;
    }
    h2 {
      background: var(--orange);
      color: white;
      padding: 12px;
      margin: 0 0 10px 0;
      text-align: center;
      border-radius: 6px 6px 0 0;
      font-size: 20px;
    }
    h3 {
      color: var(--orange);
      margin: 0 0 10px 0;
      text-align: center;
      font-size: 18px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 15px;
      margin-bottom: 15px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 10px 8px;
      text-align: center;
    }
    th {
      background: #f1f1f1;
      font-weight: bold;
      color: #2c3e50;
    }
    td.left {
      text-align: left;
      padding-left: 15px;
      font-weight: 500;
    }
    .subhead {
      background: #e8e8e8 !important;
      font-weight: bold;
    }
    .total {
      background: #fef9e7 !important;
      font-weight: native;
      font-size: 16px;
    }
    .total td:last-child {
      font-size: 18px;
    }
    .remark {
      padding: 14px;
      background: #f8f9fa;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-style: italic;
      text-align: center;
      margin-top: 10px;
      color: #e74c3c;
      font-weight: bold;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    .full-width {
      grid-column: 1 / -1;
    }
    .boulder-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    .boulder-left {
      border: 2px solid var(--border);
      padding: 15px;
      border-radius: 6px;
      background: #fff;
    }
    .boulder-right {
      border: 2px solid var(--border);
      padding: 15px;
      border-radius: 6px;
      background: #fff;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .boxed {
      border: 2px solid var(--border);
      padding: 15px;
      border-radius: 6px;
      background: #fff;
    }
    .capture-section {
      background: #fff;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    .capture-section:hover {
      background: #f8f9fa;
    }
    @media (max-width: 1480px) {
      :root { --w: 98vw; }
      .grid, .boulder-grid { grid-template-columns: 1fr; }
      .input-group { grid-template-columns: 1fr; }
    }
    @media print {
      @page {
        size: A4 portrait;
        margin: 1cm;
      }
      body {
        background: white;
        padding: 0;
        font-size: 12px;
      }
      .container {
        max-width: none;
      }
      .controls { display: none; }
      .report {
        box-shadow: none;
        border: none;
        padding: 10px;
        max-width: none;
        width: 100%;
      }
      button { display: none; }
      .grid, .boulder-grid {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      table {
        font-size: 11px;
      }
      th, td {
        padding: 5px 4px;
      }
    }
  </style>
  <!-- Add html2canvas library for capturing DOM as image -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
<div class="container">
  <div class="controls">
    <h3>Enter Today's (FTD) Data – Update & Click Generate</h3>
    <div class="input-group">
      <div class="input-row"><label>Mine Production (tons)</label><input type="number" id="mine_prod" value="2612"></div>
      <div class="input-row"><label>No. of Holes Drilled</label><input type="number" id="holes" value="600"></div>
      <div class="input-row"><label>Total Feetage (ft)</label><input type="number" id="feetage" value="3266"></div>
      <div class="input-row"><label>No. of NMR</label><input type="number" id="nmr" value="9"></div>
      <div class="input-row"><label>Running Hours</label><input type="number" step="0.1" id="run_hrs" value="10.2"></div>
      <div class="input-row"><label>Maintenance Hours</label><input type="number" step="0.1" id="maint_hrs" value="3.5"></div>
      <div class="input-row"><label>Breakdown Hours</label><input type="number" step="0.1" id="break_hrs" value="0"></div>
      <div class="input-row"><label>Power Cut Hours</label><input type="number" step="0.1" id="power_hrs" value="3.8"></div>
    </div>
    <div class="input-group">
      <div class="input-row"><label>Plant Production (tons)</label><input type="number" id="plant_prod" value="1865"></div>
      <div class="input-row"><label>No. of Compressors Running</label><input type="number" id="compressors" value="9"></div>
      <div class="input-row"><label>TPH (Tons Per Hour)</label><input type="number" step="0.1" id="tph" value="183"></div>
      <div class="input-row"><label>Boulder Jam Hours</label><input type="number" step="0.1" id="jam_hrs" value="0.5"></div>
      <div class="input-row"><label>No Feed Hours</label><input type="number" step="0.1" id="nofeed_hrs" value="2.5"></div>
      <div class="input-row"><label>% Recovery</label><input type="number" step="0.1" id="recovery" value="83"></div>
      <div class="input-row"><label>% Breaking</label><input type="number" step="0.1" id="breaking" value="23"></div>
      <div class="input-row"><label>Trips - Day Shift</label><input type="number" id="trips_day" value="39"></div>
      <div class="input-row"><label>Trips - Night Shift</label><input type="number" id="trips_night" value="54"></div>
    </div>
    <!-- New Input Group for Boulder Transportation Details -->
    <h4>Boulder Transportation - Production (FTD Tons)</h4>
    <div class="input-group">
      <div class="input-row"><label>10 MM</label><input type="number" step="0.1" id="prod_10mm" value="381.6"></div>
      <div class="input-row"><label>20 MM</label><input type="number" step="0.1" id="prod_20mm" value="593.6"></div>
      <div class="input-row"><label>V-Sand</label><input type="number" step="0.1" id="prod_vsand" value="296.8"></div>
      <div class="input-row"><label>Railway Ballast</label><input type="number" step="0.1" id="prod_railballast" value="0"></div>
      <div class="input-row"><label>40 MM</label><input type="number" step="0.1" id="prod_40mm" value="0"></div>
      <div class="input-row"><label>Rivo Sand</label><input type="number" step="0.1" id="prod_rivosand" value="763.2"></div>
      <div class="input-row"><label>Slurry</label><input type="number" step="0.1" id="prod_slurry" value="84.8"></div>
      <div class="input-row"><label>Total Production</label><input type="number" id="prod_total" value="2120"></div>
    </div>
    <h4>Boulder Transportation - Trips (Day/Night)</h4>
    <div class="input-group">
      <div class="input-row"><label>AP39UQ0095 Day</label><input type="number" id="trip_ap39uq0095_day" value="0"></div>
      <div class="input-row"><label>AP39UQ0095 Night</label><input type="number" id="trip_ap39uq0095_night" value="0"></div>
      <div class="input-row"><label>AP39UQ0097 Day</label><input type="number" id="trip_ap39uq0097_day" value="5"></div>
      <div class="input-row"><label>AP39UQ0097 Night</label><input type="number" id="trip_ap39uq0097_night" value="5"></div>
      <div class="input-row"><label>AP39UW9880 Day</label><input type="number" id="trip_ap39uw9880_day" value="6"></div>
      <div class="input-row"><label>AP39UW9880 Night</label><input type="number" id="trip_ap39uw9880_night" value="6"></div>
      <div class="input-row"><label>AP39UW9881 Day</label><input type="number" id="trip_ap39uw9881_day" value="5"></div>
      <div class="input-row"><label>AP39UW9881 Night</label><input type="number" id="trip_ap39uw9881_night" value="4"></div>
      <div class="input-row"><label>AP39UY4651 Day</label><input type="number" id="trip_ap39uy4651_day" value="1"></div>
      <div class="input-row"><label>AP39UY4651 Night</label><input type="number" id="trip_ap39uy4651_night" value="5"></div>
      <div class="input-row"><label>AP39UY4652 Day</label><input type="number" id="trip_ap39uy4652_day" value="5"></div>
      <div class="input-row"><label>AP39UY4652 Night</label><input type="number" id="trip_ap39uy4652_night" value="6"></div>
      <div class="input-row"><label>AP39WC0926 Day</label><input type="number" id="trip_ap39wc0926_day" value="0"></div>
      <div class="input-row"><label>AP39WC0926 Night</label><input type="number" id="trip_ap39wc0926_night" value="5"></div>
      <div class="input-row"><label>AP39WC0927 Day</label><input type="number" id="trip_ap39wc0927_day" value="5"></div>
      <div class="input-row"><label>AP39WC0927 Night</label><input type="number" id="trip_ap39wc0927_night" value="4"></div>
      <div class="input-row"><label>AP39WC0928 Day</label><input type="number" id="trip_ap39wc0928_day" value="6"></div>
      <div class="input-row"><label>AP39WC0928 Night</label><input type="number" id="trip_ap39wc0928_night" value="6"></div>
      <div class="input-row"><label>AP39WF2052 Day</label><input type="number" id="trip_ap39wf2052_day" value="3"></div>
      <div class="input-row"><label>AP39WF2052 Night</label><input type="number" id="trip_ap39wf2052_night" value="7"></div>
      <div class="input-row"><label>AP39WF2057 Day</label><input type="number" id="trip_ap39wf2057_day" value="3"></div>
      <div class="input-row"><label>AP39WF2057 Night</label><input type="number" id="trip_ap39wf2057_night" value="6"></div>
      <div class="input-row"><label>AP39WF2058 Day</label><input type="number" id="trip_ap39wf2058_day" value="0"></div>
      <div class="input-row"><label>AP39WF2058 Night</label><input type="number" id="trip_ap39wf2058_night" value="0"></div>
    </div>
    <h4>Boulder Transportation - Tonnage (Day/Night)</h4>
    <div class="input-group">
      <div class="input-row"><label>Tonnage Day</label><input type="number" id="ton_day" value="936"></div>
      <div class="input-row"><label>Tonnage Night</label><input type="number" id="ton_night" value="1417"></div>
      <div class="input-row"><label>FTD Tonnage Total</label><input type="number" id="ton_ftd" value="2353"></div>
    </div>
    <h4>Godown Stock (Tons)</h4>
    <div class="input-group">
      <div class="input-row"><label>10 MM</label><input type="number" id="stock_10mm" value="130"></div>
      <div class="input-row"><label>20 MM</label><input type="number" id="stock_20mm" value="4250"></div>
      <div class="input-row"><label>Rivo Sand</label><input type="number" id="stock_rivosand" value="18420"></div>
      <div class="input-row"><label>Railway Ballast</label><input type="number" id="stock_railballast" value="2000"></div>
      <div class="input-row"><label>40 MM</label><input type="number" id="stock_40mm" value="0"></div>
      <div class="input-row"><label>VSI</label><input type="number" id="stock_vsi" value="17235"></div>
      <div class="input-row"><label>GSB</label><input type="number" id="stock_gsb" value="0"></div>
      <div class="input-row"><label>Total Stock</label><input type="number" id="stock_total" value="42035"></div>
    </div>
    <h4>Remarks</h4>
    <div class="input-group">
      <div class="input-row"><label>Mine Operation Remark</label><input type="text" id="mine_remark" value="Staggered Blasting Pattern Implemented" class="full-width"></div>
    </div>
    <div class="input-group">
      <div class="input-row"><label>Plant Operation Remark</label><input type="text" id="plant_remark" value="Plant running smoothly with minor delays due to boulder jamming" class="full-width"></div>
    </div>
    <center>
      <button onclick="generateReport()">Generate / Update Report</button>
      <button class="print-btn" onclick="window.print()">Print Report</button>
      <button class="share-btn" onclick="captureAndShareFullReport()">Capture & Share Full Report</button>
    </center>
  </div>
  <!-- REPORT OUTPUT -->
  <div class="report" id="report">
    <h1>DAILY OPERATIONS REPORT</h1>
    <div class="date">Date: <span id="today"></span></div>
    <!-- Mine and Plant in 2-column 1-row grid -->
    <div class="grid">
      <div class="capture-section" onclick="captureAndShareSection('mine-op-section')">
        <h2>MINE OPERATION</h2>
        <div id="mine-op-section">
          <table>
            <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
            <tr><td class="left">Production (tons)</td><td id="r_mine_prod">2,612</td><td>50,453</td></tr>
            <tr><td class="left">No. of Holes</td><td id="r_holes">600</td><td>11,702</td></tr>
            <tr><td class="left">Total Feetage (ft)</td><td id="r_feetage">3,266</td><td>63,066</td></tr>
            <tr><td class="left">No. of NMR</td><td id="r_nmr">9</td><td>183</td></tr>
            <tr><td class="left">Running Hrs</td><td id="r_run_hrs">10.2</td><td>169.9</td></tr>
            <tr><td class="left">Maintenance Hrs</td><td id="r_maint_hrs">3.5</td><td>64</td></tr>
            <tr><td class="left">Breakdown Hrs</td><td id="r_break_hrs">0</td><td>6</td></tr>
            <tr><td class="left">Power Cut Hrs</td><td id="r_power_hrs">3.8</td><td>95.6</td></tr>
            <tr><td class="left">% Breaking</td><td id="r_breaking">23%</td><td>20%</td></tr>
          </table>
          <div class="remark">Remark: <span id="r_mine_remark">Staggered Blasting Pattern Implemented</span></div>
        </div>
      </div>
      <div class="capture-section" onclick="captureAndShareSection('plant-op-section')">
        <h2>PLANT OPERATION</h2>
        <div id="plant-op-section">
          <table>
            <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
            <tr><td class="left">Production (tons)</td><td id="r_plant_prod">1,865</td><td>31,987</td></tr>
            <tr><td class="left">No. of Compressors Running</td><td id="r_compressors">9</td><td>183</td></tr>
            <tr><td class="left">TPH (Avg)</td><td id="r_tph">183</td><td>188</td></tr>
            <tr><td class="left">Boulder Jam Hrs</td><td id="r_jam_hrs">0.5</td><td>20.9</td></tr>
            <tr><td class="left">No Feed Hrs</td><td id="r_nofeed_hrs">2.5</td><td>34</td></tr>
            <tr><td class="left">% of Recovery</td><td id="r_recovery">83%</td><td>83%</td></tr>
          </table>
          <div class="remark">Remark: <span id="r_plant_remark">Plant running smoothly with minor delays due to boulder jamming</span></div>
        </div>
      </div>
    </div>
    <div class="boulder-grid">
      <div class="boulder-left capture-section" onclick="captureAndShareSection('boulder-transport-section')">
        <h2>BOULDER TRANSPORTATION</h2>
        <div id="boulder-transport-section">
          <!-- Summary Table -->
          <table>
            <tr class="subhead"><th class="left"></th><th>Day</th><th>Night</th><th>FTD</th><th>MTD</th></tr>
            <tr><td class="left">Trips</td><td id="r_trips_day">39</td><td id="r_trips_night">54</td><td id="r_trips_ftd">93</td><td>1,368</td></tr>
            <tr><td class="left">Tonnage</td><td id="r_ton_day">936</td><td id="r_ton_night">1,417</td><td id="r_ton_ftd">2,353</td><td>32,757</td></tr>
          </table>
          <!-- Vehicle-wise Table -->
          <table>
            <tr class="subhead"><th class="left">Vehicle No</th><th>Day</th><th>Night</th><th>FTD Total</th><th>MTD</th></tr>
            <tr><td class="left">AP39UQ0095</td><td id="r_trip_ap39uq0095_day">0</td><td id="r_trip_ap39uq0095_night">0</td><td id="r_trip_ap39uq0095_ftd">0</td><td>57</td></tr>
            <tr><td class="left">AP39UQ0097</td><td id="r_trip_ap39uq0097_day">5</td><td id="r_trip_ap39uq0097_night">5</td><td id="r_trip_ap39uq0097_ftd">10</td><td>95</td></tr>
            <tr><td class="left">AP39UW9880</td><td id="r_trip_ap39uw9880_day">6</td><td id="r_trip_ap39uw9880_night">6</td><td id="r_trip_ap39uw9880_ftd">12</td><td>152</td></tr>
            <tr><td class="left">AP39UW9881</td><td id="r_trip_ap39uw9881_day">5</td><td id="r_trip_ap39uw9881_night">4</td><td id="r_trip_ap39uw9881_ftd">9</td><td>135</td></tr>
            <tr><td class="left">AP39UY4651</td><td id="r_trip_ap39uy4651_day">1</td><td id="r_trip_ap39uy4651_night">5</td><td id="r_trip_ap39uy4651_ftd">6</td><td>127</td></tr>
            <tr><td class="left">AP39UY4652</td><td id="r_trip_ap39uy4652_day">5</td><td id="r_trip_ap39uy4652_night">6</td><td id="r_trip_ap39uy4652_ftd">11</td><td>144</td></tr>
            <tr><td class="left">AP39WC0926</td><td id="r_trip_ap39wc0926_day">0</td><td id="r_trip_ap39wc0926_night">5</td><td id="r_trip_ap39wc0926_ftd">5</td><td>136</td></tr>
            <tr><td class="left">AP39WC0927</td><td id="r_trip_ap39wc0927_day">5</td><td id="r_trip_ap39wc0927_night">4</td><td id="r_trip_ap39wc0927_ftd">9</td><td>101</td></tr>
            <tr><td class="left">AP39WC0928</td><td id="r_trip_ap39wc0928_day">6</td><td id="r_trip_ap39wc0928_night">6</td><td id="r_trip_ap39wc0928_ftd">12</td><td>154</td></tr>
            <tr><td class="left">AP39WF2052</td><td id="r_trip_ap39wf2052_day">3</td><td id="r_trip_ap39wf2052_night">7</td><td id="r_trip_ap39wf2052_ftd">10</td><td>118</td></tr>
            <tr><td class="left">AP39WF2057</td><td id="r_trip_ap39wf2057_day">3</td><td id="r_trip_ap39wf2057_night">6</td><td id="r_trip_ap39wf2057_ftd">9</td><td>149</td></tr>
            <tr><td class="left">AP39WF2058</td><td id="r_trip_ap39wf2058_day">0</td><td id="r_trip_ap39wf2058_night">0</td><td id="r_trip_ap39wf2058_ftd">0</td><td>0</td></tr>
            <tr class="total"><td class="left">GSB Total</td><td id="r_trips_day">39</td><td id="r_trips_night">54</td><td id="r_trips_ftd">93</td><td>1,368</td></tr>
          </table>
        </div>
      </div>
      <div class="boulder-right">
        <div class="boxed capture-section" onclick="captureAndShareSection('production-section')">
          <h3>Production</h3>
          <div id="production-section">
            <table>
              <tr class="subhead"><th class="left">Product</th><th>FTD</th><th>MTD</th></tr>
              <tr><td class="left">10 MM</td><td id="r_prod_10mm">381.6</td><td>3722.4</td></tr>
              <tr><td class="left">20 MM</td><td id="r_prod_20mm">593.6</td><td>5790.4</td></tr>
              <tr><td class="left">V-Sand</td><td id="r_prod_vsand">296.8</td><td>2895.2</td></tr>
              <tr><td class="left">Railway Ballast</td><td id="r_prod_railballast">0</td><td>57</td></tr>
              <tr><td class="left">40 MM</td><td id="r_prod_40mm">0</td><td>0</td></tr>
              <tr><td class="left">Rivo Sand</td><td id="r_prod_rivosand">763.2</td><td>7444.8</td></tr>
              <tr><td class="left">Slurry</td><td id="r_prod_slurry">84.8</td><td>827.2</td></tr>
              <tr class="total"><td class="left">Total</td><td id="r_prod_total">2120</td><td>20,680</td></tr>
            </table>
          </div>
        </div>
        <div class="boxed capture-section" onclick="captureAndShareSection('stock-section')">
          <h3>Godown Stock</h3>
          <div id="stock-section">
            <table>
              <tr class="subhead"><th class="left">Material</th><th>Quantity</th></tr>
              <tr><td class="left">10 MM</td><td id="r_stock_10mm">130</td></tr>
              <tr><td class="left">20 MM</td><td id="r_stock_20mm">4250</td></tr>
              <tr><td class="left">Rivo Sand</td><td id="r_stock_rivosand">18420</td></tr>
              <tr><td class="left">Railway Ballast</td><td id="r_stock_railballast">2000</td></tr>
              <tr><td class="left">40 MM</td><td id="r_stock_40mm">0</td></tr>
              <tr><td class="left">VSI</td><td id="r_stock_vsi">17235</td></tr>
              <tr><td class="left">GSB</td><td id="r_stock_gsb">0</td></tr>
              <tr class="total"><td class="left">Total</td><td id="r_stock_total">42,035</td></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="capture-section full-width" onclick="captureAndShareSection('summary-section')">
      <h2>PRODUCTION SUMMARY</h2>
      <div id="summary-section">
        <table>
          <tr class="subhead"><th class="left"></th><th>Mine Production</th><th>Plant Production</th><th>Total Production</th></tr>
          <tr><td class="left">FTD</td><td id="s_mine">2,612</td><td id="s_plant">1,865</td><td class="total" id="s_total_ftd">—</td></tr>
          <tr class="total"><td class="left">MTD</td><td>50,453</td><td>31,987</td><td>82,440</td></tr>
        </table>
      </div>
    </div>
  </div>
</div>
<script>
function generateReport() {
  // Get values
  const mine = parseFloat(document.getElementById('mine_prod').value) || 0;
  const plant = parseFloat(document.getElementById('plant_prod').value) || 0;
  const day = parseInt(document.getElementById('trips_day').value) || 0;
  const night = parseInt(document.getElementById('trips_night').value) || 0;
  // Update all fields
  document.getElementById('r_mine_prod').innerText = mine.toLocaleString();
  document.getElementById('r_plant_prod').innerText = plant.toLocaleString();
  document.getElementById('r_trips_day').innerText = day;
  document.getElementById('r_trips_night').innerText = night;
  document.getElementById('r_trips_ftd').innerText = day + night;
  // Other fields
  document.getElementById('r_holes').innerText = document.getElementById('holes').value;
  document.getElementById('r_feetage').innerText = document.getElementById('feetage').value;
  document.getElementById('r_nmr').innerText = document.getElementById('nmr').value;
  document.getElementById('r_run_hrs').innerText = document.getElementById('run_hrs').value;
  document.getElementById('r_maint_hrs').innerText = document.getElementById('maint_hrs').value;
  document.getElementById('r_break_hrs').innerText = document.getElementById('break_hrs').value;
  document.getElementById('r_power_hrs').innerText = document.getElementById('power_hrs').value;
  document.getElementById('r_compressors').innerText = document.getElementById('compressors').value;
  document.getElementById('r_tph').innerText = document.getElementById('tph').value;
  document.getElementById('r_jam_hrs').innerText = document.getElementById('jam_hrs').value;
  document.getElementById('r_nofeed_hrs').innerText = document.getElementById('nofeed_hrs').value;
  document.getElementById('r_recovery').innerText = document.getElementById('recovery').value + '%';
  document.getElementById('r_breaking').innerText = document.getElementById('breaking').value + '%';
  // Remarks
  document.getElementById('r_mine_remark').innerText = document.getElementById('mine_remark').value;
  document.getElementById('r_plant_remark').innerText = document.getElementById('plant_remark').value;
  // Boulder Transportation - Production
  document.getElementById('r_prod_10mm').innerText = document.getElementById('prod_10mm').value;
  document.getElementById('r_prod_20mm').innerText = document.getElementById('prod_20mm').value;
  document.getElementById('r_prod_vsand').innerText = document.getElementById('prod_vsand').value;
  document.getElementById('r_prod_railballast').innerText = document.getElementById('prod_railballast').value;
  document.getElementById('r_prod_40mm').innerText = document.getElementById('prod_40mm').value;
  document.getElementById('r_prod_rivosand').innerText = document.getElementById('prod_rivosand').value;
  document.getElementById('r_prod_slurry').innerText = document.getElementById('prod_slurry').value;
  document.getElementById('r_prod_total').innerText = document.getElementById('prod_total').value;
  // Boulder Transportation - Trips
  const vehicles = [
    {day: 'trip_ap39uq0095_day', night: 'trip_ap39uq0095_night', ftd: 'trip_ap39uq0095_ftd'},
    {day: 'trip_ap39uq0097_day', night: 'trip_ap39uq0097_night', ftd: 'trip_ap39uq0097_ftd'},
    {day: 'trip_ap39uw9880_day', night: 'trip_ap39uw9880_night', ftd: 'trip_ap39uw9880_ftd'},
    {day: 'trip_ap39uw9881_day', night: 'trip_ap39uw9881_night', ftd: 'trip_ap39uw9881_ftd'},
    {day: 'trip_ap39uy4651_day', night: 'trip_ap39uy4651_night', ftd: 'trip_ap39uy4651_ftd'},
    {day: 'trip_ap39uy4652_day', night: 'trip_ap39uy4652_night', ftd: 'trip_ap39uy4652_ftd'},
    {day: 'trip_ap39wc0926_day', night: 'trip_ap39wc0926_night', ftd: 'trip_ap39wc0926_ftd'},
    {day: 'trip_ap39wc0927_day', night: 'trip_ap39wc0927_night', ftd: 'trip_ap39wc0927_ftd'},
    {day: 'trip_ap39wc0928_day', night: 'trip_ap39wc0928_night', ftd: 'trip_ap39wc0928_ftd'},
    {day: 'trip_ap39wf2052_day', night: 'trip_ap39wf2052_night', ftd: 'trip_ap39wf2052_ftd'},
    {day: 'trip_ap39wf2057_day', night: 'trip_ap39wf2057_night', ftd: 'trip_ap39wf2057_ftd'},
    {day: 'trip_ap39wf2058_day', night: 'trip_ap39wf2058_night', ftd: 'trip_ap39wf2058_ftd'}
  ];
  vehicles.forEach(v => {
    const dayVal = parseInt(document.getElementById(v.day).value) || 0;
    const nightVal = parseInt(document.getElementById(v.night).value) || 0;
    document.getElementById(`r_trip_${v.day.split('_')[1]}_day`).innerText = dayVal;
    document.getElementById(`r_trip_${v.night.split('_')[1]}_night`).innerText = nightVal;
    document.getElementById(`r_trip_${v.ftd.split('_')[1]}_ftd`).innerText = dayVal + nightVal;
  });
  // Tonnage
  document.getElementById('r_ton_day').innerText = document.getElementById('ton_day').value;
  document.getElementById('r_ton_night').innerText = document.getElementById('ton_night').value;
  document.getElementById('r_ton_ftd').innerText = document.getElementById('ton_ftd').value;
  // Godown Stock
  document.getElementById('r_stock_10mm').innerText = document.getElementById('stock_10mm').value;
  document.getElementById('r_stock_20mm').innerText = document.getElementById('stock_20mm').value;
  document.getElementById('r_stock_rivosand').innerText = document.getElementById('stock_rivosand').value;
  document.getElementById('r_stock_railballast').innerText = document.getElementById('stock_railballast').value;
  document.getElementById('r_stock_40mm').innerText = document.getElementById('stock_40mm').value;
  document.getElementById('r_stock_vsi').innerText = document.getElementById('stock_vsi').value;
  document.getElementById('r_stock_gsb').innerText = document.getElementById('stock_gsb').value;
  document.getElementById('r_stock_total').innerText = document.getElementById('stock_total').value.toLocaleString();
  // Summary
  document.getElementById('s_mine').innerText = mine.toLocaleString();
  document.getElementById('s_plant').innerText = plant.toLocaleString();
  document.getElementById('s_total_ftd').innerText = (mine + plant).toLocaleString();
  // Today's date
  const today = new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'long', year: 'numeric' });
  document.getElementById('today').innerText = today;
}
// Function to capture a section as image and share
async function captureAndShareSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (!element) {
    alert('Section not found!');
    return;
  }
  try {
    const canvas = await html2canvas(element, {
      scale: 3, // Increased for higher resolution and clarity
      useCORS: true,
      allowTaint: true,
      backgroundColor: '#ffffff',
      width: element.scrollWidth,
      height: element.scrollHeight
    });
    const imageData = canvas.toDataURL('image/png');
    const blob = await (await fetch(imageData)).blob();
    await shareImage(blob, `${sectionId.replace('-section', '')}.png`);
  } catch (error) {
    console.error('Capture failed:', error);
    alert('Capture failed. Try downloading instead.');
    downloadImage(imageData, `${sectionId.replace('-section', '')}.png`);
  }
}
// Function to capture full report
async function captureAndShareFullReport() {
  const element = document.getElementById('report');
  try {
    const canvas = await html2canvas(element, {
      scale: 3, // Increased for higher resolution and clarity
      useCORS: true,
      allowTaint: true,
      backgroundColor: '#ffffff',
      width: element.scrollWidth,
      height: element.scrollHeight
    });
    const imageData = canvas.toDataURL('image/png');
    const blob = await (await fetch(imageData)).blob();
    await shareImage(blob, 'full-report.png');
  } catch (error) {
    console.error('Capture failed:', error);
    alert('Capture failed. Try downloading instead.');
    downloadImage(imageData, 'full-report.png');
  }
}
// Share image using Web Share API (works best on mobile)
async function shareImage(blob, filename) {
  if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([blob], filename, { type: 'image/png' })] })) {
    try {
      await navigator.share({
        title: 'Daily Operations Report',
        text: 'Sharing report section/image',
        files: [new File([blob], filename, { type: 'image/png' })]
      });
    } catch (error) {
      if (error.name !== 'AbortError') {
        console.error('Share failed:', error);
        downloadImage(URL.createObjectURL(blob), filename);
      }
    }
  } else {
    // Fallback to download
    downloadImage(URL.createObjectURL(blob), filename);
  }
}
// Download image fallback
function downloadImage(imageUrl, filename) {
  const link = document.createElement('a');
  link.download = filename;
  link.href = imageUrl;
  link.click();
}
// Auto-update on input change (optional)
document.querySelectorAll('input').forEach(input => {
  input.addEventListener('input', generateReport);
});
// Run once on load
generateReport();
</script>
</body>
</html>
