<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>Daily Operations Report - Mining & Plant</title>
 <style>
 :root {
 --w: 1450px;
 --h: auto;
 --orange: #e67e22;
 --blue: #2980b9;
 --border: #000;
 --gray: #f8f9fa;
 --green: #27ae60;
 }
 body {
 background: #ecf0f1;
 font-family: 'Segoe UI', Arial, sans-serif;
 margin: 0;
 padding: 20px;
 }
 .container {
 max-width: var(--w);
 margin: 0 auto;
 }
 .controls {
 background: #fff;
 padding: 20px;
 border-radius: 10px;
 box-shadow: 0 4px 12px rgba(0,0,0,0.15);
 margin-bottom: 20px;
 }
 .controls h3 {
 margin-top: 0;
 color: #2c3e50;
 }
 .input-group {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
 gap: 12px;
 margin-bottom: 15px;
 }
 .input-row {
 display: flex;
 align-items: center;
 gap: 10px;
 }
 .input-row label {
 width: 200px;
 font-weight: 600;
 color: #34495e;
 }
 .input-row input {
 padding: 8px 10px;
 border: 1px solid #bdc3c7;
 border-radius: 4px;
 width: 100px;
 font-size: 14px;
 }
 .input-row input.full-width {
 width: auto;
 flex: 1;
 }
 button {
 background: var(--orange);
 color: white;
 border: none;
 padding: 12px 24px;
 font-size: 16px;
 font-weight: bold;
 border-radius: 6px;
 cursor: pointer;
 transition: 0.3s;
 margin: 0 10px;
 }
 button:hover {
 background: #d35400;
 transform: translateY(-2px);
 }
 .achievement-btn {
 background: var(--green);
 }
 .achievement-btn:hover {
 background: #229954;
 }
 .print-btn {
 background: var(--blue);
 }
 .print-btn:hover {
 background: #1f618d;
 }
 .share-btn {
 background: #25D366;
 }
 .share-btn:hover {
 background: #128C7E;
 }
 .report {
 background: #fff;
 padding: 20px;
 border: 3px solid var(--border);
 border-radius: 10px;
 box-shadow: 0 6px 20px rgba(0,0,0,0.2);
 min-height: var(--h);
 }
 h1 {
 text-align: center;
 color: #2c3e50;
 margin-bottom: 10px;
 font-size: 28px;
 }
 .date {
 text-align: center;
 color: #7f8c8d;
 font-weight: bold;
 margin-bottom: 20px;
 }
 h2 {
 background: var(--orange);
 color: white;
 padding: 12px;
 margin: 0 0 10px 0;
 text-align: center;
 border-radius: 6px 6px 0 0;
 font-size: 20px;
 }
 h2.achievement {
 background: var(--green);
 }
 h3 {
 color: var(--orange);
 margin: 0 0 10px 0;
 text-align: center;
 font-size: 18px;
 }
 table {
 width: 100%;
 border-collapse: collapse;
 font-size: 15px;
 margin-bottom: 15px;
 }
 th, td {
 border: 1px solid var(--border);
 padding: 10px 8px;
 text-align: center;
 }
 th {
 background: #f1f1f1;
 font-weight: bold;
 color: #2c3e50;
 }
 td.left {
 text-align: left;
 padding-left: 15px;
 font-weight: 500;
 }
 .subhead {
 background: #e8e8e8 !important;
 font-weight: bold;
 }
 .total {
 background: #fef9e7 !important;
 font-weight: bold;
 font-size: 16px;
 }
 .total td:last-child {
 font-size: 18px;
 }
 .remark {
 padding: 14px;
 background: #f8f9fa;
 border: 1px solid #ddd;
 border-radius: 6px;
 font-style: italic;
 text-align: center;
 margin-top: 10px;
 color: #e74c3c;
 font-weight: bold;
 }
 .grid {
 display: grid;
 grid-template-columns: 1fr 1fr;
 gap: 20px;
 margin-bottom: 20px;
 }
 .full-width {
 grid-column: 1 / -1;
 }
 .boulder-grid {
 display: grid;
 grid-template-columns: 1fr 1fr;
 gap: 20px;
 margin-bottom: 20px;
 }
 .boulder-left {
 border: 2px solid var(--border);
 padding: 15px;
 border-radius: 6px;
 background: #fff;
 }
 .boulder-right {
 border: 2px solid var(--border);
 padding: 15px;
 border-radius: 6px;
 background: #fff;
 display: flex;
 flex-direction: column;
 gap: 20px;
 }
 .boxed {
 border: 2px solid var(--border);
 padding: 15px;
 border-radius: 6px;
 background: #fff;
 }
 .summary-header {
 text-align: center;
 margin-bottom: 15px;
 font-weight: bold;
 font-size: 18px;
 color: #2c3e50;
 }
 @media (max-width: 1480px) {
 :root { --w: 98vw; }
 .grid, .boulder-grid { grid-template-columns: 1fr; }
 .input-group { grid-template-columns: 1fr; }
 }
 @media print {
 @page {
 size: A4 portrait;
 margin: 1cm;
 }
 body {
 background: white;
 padding: 0;
 font-size: 12px;
 }
 .container {
 max-width: none;
 }
 .controls { display: none; }
 .report {
 box-shadow: none;
 border: none;
 padding: 10px;
 max-width: none;
 width: 100%;
 }
 button { display: none; }
 .grid, .boulder-grid {
 grid-template-columns: 1fr;
 gap: 10px;
 }
 table {
 font-size: 11px;
 }
 th, td {
 padding: 5px 4px;
 }
 }
 </style>
</head>
<body>
<div class="container">
 <div class="controls">
 <h3>Enter Today's (FTD) Data – Update & Click Generate</h3>
 <div class="input-group">
 <div class="input-row"><label>No. of Compressors</label><input type="number" id="compressors" value="9"></div>
 <div class="input-row"><label>No. of NMR</label><input type="number" id="nmr" value="9"></div>
 <div class="input-row"><label>No. of Holes Drilled</label><input type="number" id="holes" value="600"></div>
 <div class="input-row"><label>Total Feetage (ft)</label><input type="number" id="feetage" value="3266"></div>
 <div class="input-row"><label>Mine Production (tons)</label><input type="number" id="mine_prod" value="2612"></div>
 <div class="input-row"><label>% Recovery</label><input type="number" step="0.1" id="recovery" value="83"></div>
 <div class="input-row"><label>% Breaking</label><input type="number" step="0.1" id="breaking" value="23"></div>
 </div>
 <div class="input-group">
 <div class="input-row"><label>Plant Production (tons)</label><input type="number" id="plant_prod" value="1865"></div>
 <div class="input-row"><label>Running Hours</label><input type="number" step="0.1" id="run_hrs" value="10.2"></div>
 <div class="input-row"><label>TPH (Tons Per Hour)</label><input type="number" step="0.1" id="tph" value="183"></div>
 <div class="input-row"><label>Maintenance Hours</label><input type="number" step="0.1" id="maint_hrs" value="3.5"></div>
 <div class="input-row"><label>Breakdown Hours</label><input type="number" step="0.1" id="break_hrs" value="0"></div>
 <div class="input-row"><label>Power Cut Hours</label><input type="number" step="0.1" id="power_hrs" value="3.8"></div>
 <div class="input-row"><label>Boulder Jam Hours</label><input type="number" step="0.1" id="jam_hrs" value="0.5"></div>
 <div class="input-row"><label>No Feed Hours</label><input type="number" step="0.1" id="nofeed_hrs" value="2.5"></div>
 <div class="input-row"><label>Trips - Day Shift</label><input type="number" id="trips_day" value="39"></div>
 <div class="input-row"><label>Trips - Night Shift</label><input type="number" id="trips_night" value="54"></div>
 </div>
 <h4>Boulder Transportation - Production (FTD Tons)</h4>
 <div class="input-group">
 <div class="input-row"><label>10 MM</label><input type="number" step="0.1" id="prod_10mm" value="381.6"></div>
 <div class="input-row"><label>20 MM</label><input type="number" step="0.1" id="prod_20mm" value="593.6"></div>
 <div class="input-row"><label>V-Sand</label><input type="number" step="0.1" id="prod_vsand" value="296.8"></div>
 <div class="input-row"><label>Railway Ballast</label><input type="number" step="0.1" id="prod_railballast" value="0"></div>
 <div class="input-row"><label>40 MM</label><input type="number" step="0.1" id="prod_40mm" value="0"></div>
 <div class="input-row"><label>Rivo Sand</label><input type="number" step="0.1" id="prod_rivosand" value="763.2"></div>
 <div class="input-row"><label>Slurry</label><input type="number" step="0.1" id="prod_slurry" value="84.8"></div>
 <div class="input-row"><label>Total Production</label><input type="number" id="prod_total" value="2120"></div>
 </div>
 <h4>Boulder Transportation - Trips (Day/Night)</h4>
 <div class="input-group">
 <div class="input-row"><label>AP39UQ0095 Day</label><input type="number" id="trip_ap39uq0095_day" value="0"></div>
 <div class="input-row"><label>AP39UQ0095 Night</label><input type="number" id="trip_ap39uq0095_night" value="0"></div>
 <div class="input-row"><label>AP39UQ0097 Day</label><input type="number" id="trip_ap39uq0097_day" value="5"></div>
 <div class="input-row"><label>AP39UQ0097 Night</label><input type="number" id="trip_ap39uq0097_night" value="5"></div>
 <div class="input-row"><label>AP39UW9880 Day</label><input type="number" id="trip_ap39uw9880_day" value="6"></div>
 <div class="input-row"><label>AP39UW9880 Night</label><input type="number" id="trip_ap39uw9880_night" value="6"></div>
 <div class="input-row"><label>AP39UW9881 Day</label><input type="number" id="trip_ap39uw9881_day" value="5"></div>
 <div class="input-row"><label>AP39UW9881 Night</label><input type="number" id="trip_ap39uw9881_night" value="4"></div>
 <div class="input-row"><label>AP39UY4651 Day</label><input type="number" id="trip_ap39uy4651_day" value="1"></div>
 <div class="input-row"><label>AP39UY4651 Night</label><input type="number" id="trip_ap39uy4651_night" value="5"></div>
 <div class="input-row"><label>AP39UY4652 Day</label><input type="number" id="trip_ap39uy4652_day" value="5"></div>
 <div class="input-row"><label>AP39UY4652 Night</label><input type="number" id="trip_ap39uy4652_night" value="6"></div>
 <div class="input-row"><label>AP39WC0926 Day</label><input type="number" id="trip_ap39wc0926_day" value="0"></div>
 <div class="input-row"><label>AP39WC0926 Night</label><input type="number" id="trip_ap39wc0926_night" value="5"></div>
 <div class="input-row"><label>AP39WC0927 Day</label><input type="number" id="trip_ap39wc0927_day" value="5"></div>
 <div class="input-row"><label>AP39WC0927 Night</label><input type="number" id="trip_ap39wc0927_night" value="4"></div>
 <div class="input-row"><label>AP39WC0928 Day</label><input type="number" id="trip_ap39wc0928_day" value="6"></div>
 <div class="input-row"><label>AP39WC0928 Night</label><input type="number" id="trip_ap39wc0928_night" value="6"></div>
 <div class="input-row"><label>AP39WF2052 Day</label><input type="number" id="trip_ap39wf2052_day" value="3"></div>
 <div class="input-row"><label>AP39WF2052 Night</label><input type="number" id="trip_ap39wf2052_night" value="7"></div>
 <div class="input-row"><label>AP39WF2057 Day</label><input type="number" id="trip_ap39wf2057_day" value="3"></div>
 <div class="input-row"><label>AP39WF2057 Night</label><input type="number" id="trip_ap39wf2057_night" value="6"></div>
 <div class="input-row"><label>AP39WF2058 Day</label><input type="number" id="trip_ap39wf2058_day" value="0"></div>
 <div class="input-row"><label>AP39WF2058 Night</label><input type="number" id="trip_ap39wf2058_night" value="0"></div>
 </div>
 <h4>Boulder Transportation - Tonnage (Day/Night)</h4>
 <div class="input-group">
 <div class="input-row"><label>Tonnage Day</label><input type="number" id="ton_day" value="936"></div>
 <div class="input-row"><label>Tonnage Night</label><input type="number" id="ton_night" value="1417"></div>
 <div class="input-row"><label>FTD Tonnage Total</label><input type="number" id="ton_ftd" value="2353"></div>
 </div>
 <h4>Summary Data</h4>
 <div class="input-group">
 <div class="input-row"><label>Boulder Dispatch QTY (tons)</label><input type="number" id="boulder_dispatch_ftd" value="2039"></div>
 <div class="input-row"><label>Dispatch QTY (tons)</label><input type="number" id="dispatch_qty_ftd" value="1043"></div>
 <div class="input-row"><label>Basic Revenue (Lkhs)</label><input type="number" step="0.01" id="basic_rev_ftd" value="4.80"></div>
 <div class="input-row"><label>Total Revenue (Lkhs)</label><input type="number" step="0.01" id="total_rev_ftd" value="8.80"></div>
 </div>
 <h4>Godown Stock (Tons)</h4>
 <div class="input-group">
 <div class="input-row"><label>10 MM</label><input type="number" id="stock_10mm" value="130"></div>
 <div class="input-row"><label>20 MM</label><input type="number" id="stock_20mm" value="4250"></div>
 <div class="input-row"><label>Rivo Sand</label><input type="number" id="stock_rivosand" value="18420"></div>
 <div class="input-row"><label>Railway Ballast</label><input type="number" id="stock_railballast" value="2000"></div>
 <div class="input-row"><label>40 MM</label><input type="number" id="stock_40mm" value="0"></div>
 <div class="input-row"><label>VSI</label><input type="number" id="stock_vsi" value="17235"></div>
 <div class="input-row"><label>GSB</label><input type="number" id="stock_gsb" value="0"></div>
 <div class="input-row"><label>Total Stock</label><input type="number" id="stock_total" value="42035"></div>
 </div>
 <h4>Machinery Availability</h4>
 <div class="input-group">
 <div class="input-row"><label>Tippers Running</label><input type="number" id="tippers_running" value="5"></div>
 <div class="input-row"><label>Tippers Performance %</label><input type="number" id="tippers_perf" value="115"></div>
 <div class="input-row"><label>Excavator Running</label><input type="number" id="excavator_running" value="2"></div>
 <div class="input-row"><label>Excavator Performance %</label><input type="number" id="excavator_perf" value="71"></div>
 <div class="input-row"><label>Loader Running</label><input type="number" id="loader_running" value="1"></div>
 <div class="input-row"><label>Loader Performance %</label><input type="number" id="loader_perf" value="65"></div>
 <div class="input-row"><label>Rental Vehicle Available</label><input type="number" id="rental_vehicle" value="2"></div>
 <div class="input-row"><label>Rental Vehicle Performance %</label><input type="number" id="rental_perf" value="72"></div>
 </div>
 <h4>Achievement %</h4>
 <div class="input-group">
 <div class="input-row"><label>Quarry FTD %</label><input type="number" step="0.1" id="quarry_ftd" value="68"></div>
 <div class="input-row"><label>Quarry MTD %</label><input type="number" step="0.1" id="quarry_mtd" value="74"></div>
 <div class="input-row"><label>Plant FTD %</label><input type="number" step="0.1" id="plant_ftd" value="56"></div>
 <div class="input-row"><label>Plant MTD %</label><input type="number" step="0.1" id="plant_mtd" value="68"></div>
 <div class="input-row"><label>Machinery FTD %</label><input type="number" step="0.1" id="machinery_ftd" value="68"></div>
 <div class="input-row"><label>Machinery MTD %</label><input type="number" step="0.1" id="machinery_mtd" value="75"></div>
 <div class="input-row"><label>Dispatch FTD %</label><input type="number" step="0.1" id="dispatch_ftd" value="43"></div>
 <div class="input-row"><label>Dispatch MTD %</label><input type="number" step="0.1" id="dispatch_mtd" value="62"></div>
 </div>
 <h4>Remarks</h4>
 <div class="input-group">
 <div class="input-row"><label>Plant Operation Remark</label><input type="text" id="plant_remark" value="" class="full-width"></div>
 </div>
 <center>
 <button onclick="generateReport()">Generate / Update Report</button>
 <button class="achievement-btn" onclick="generateAchievement()">Update Achievement</button>
 <button class="print-btn" onclick="window.print()">Print Report</button>
 <button class="share-btn" onclick="shareReport()">Capture & Share to WhatsApp</button>
 </center>
 </div>
 <!-- REPORT OUTPUT -->
 <div class="report" id="report">
 <h1>DAILY OPERATIONS REPORT</h1>
 <div class="summary-header">
 SGX -MISSION -MIS<br>
 Date: <span id="today"></span>
 </div>
 <div class="full-width">
 <h2>EXECUTIVE SUMMARY</h2>
 <table>
 <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">Mine Production</td><td id="sum_mine_ftd">2,612</td><td>50,453</td></tr>
 <tr><td class="left">Boulder Dispatch QTY</td><td id="sum_boulder_ftd">2,039</td><td>34,796</td></tr>
 <tr><td class="left">Plant Production</td><td id="sum_plant_ftd">1,865</td><td>31,987</td></tr>
 <tr><td class="left">Dispatch QTY</td><td id="sum_dispatch_ftd">1,043</td><td>19,678</td></tr>
 <tr><td class="left">Basic Revenue (in Lkhs)</td><td id="sum_basic_rev_ftd">₹4.80</td><td>₹82.20</td></tr>
 <tr class="total"><td class="left">Total Revenue (In Lkhs)</td><td id="sum_total_rev_ftd">₹8.80</td><td>₹149.30</td></tr>
 </table>
 </div>
 <div class="date"></div>
 <!-- Mine and Plant in 2-column 1-row grid -->
 <div class="grid">
 <div>
 <h2>MINE OPERATION</h2>
 <table>
 <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">No. of Compressors</td><td id="r_compressors">9</td><td>183</td></tr>
 <tr><td class="left">No. of NMR</td><td id="r_nmr">9</td><td>183</td></tr>
 <tr><td class="left">No. of Holes</td><td id="r_holes">600</td><td>11,702</td></tr>
 <tr><td class="left">Total Feetage (ft)</td><td id="r_feetage">3,266</td><td>63,066</td></tr>
 <tr><td class="left">Production (tons)</td><td id="r_mine_prod">2,612</td><td>50,453</td></tr>
 <tr><td class="left">% of Recovery</td><td id="r_recovery">83%</td><td>83%</td></tr>
 <tr><td class="left">% of Breaking</td><td id="r_breaking">23%</td><td>20%</td></tr>
 </table>
 <div class="remark">Remark: Staggered Blasting Pattern</div>
 </div>
 <div>
 <h2>PLANT OPERATION</h2>
 <table>
 <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">Production (tons)</td><td id="r_plant_prod">1,865</td><td>31,987</td></tr>
 <tr><td class="left">Running Hrs.</td><td id="r_run_hrs">10.2</td><td>169.9</td></tr>
 <tr><td class="left">TPH</td><td id="r_tph">183</td><td>188</td></tr>
 <tr><td class="left">Maintenance Hrs</td><td id="r_maint_hrs">3.5</td><td>64</td></tr>
 <tr><td class="left">Breakdown Hrs.</td><td id="r_break_hrs">0</td><td>6</td></tr>
 <tr><td class="left">Power Cut Hrs.</td><td id="r_power_hrs">3.8</td><td>95.6</td></tr>
 <tr><td class="left">Boulder Jam Hrs.</td><td id="r_jam_hrs">0.5</td><td>20.9</td></tr>
 <tr><td class="left">No Feed Hrs.</td><td id="r_nofeed_hrs">2.5</td><td>34</td></tr>
 </table>
 <div class="remark">Remark: <span id="r_plant_remark"></span></div>
 </div>
 </div>
 <div class="boulder-grid">
 <div class="boulder-left">
 <h2>BOULDER TRANSPORTATION</h2>
 <!-- Summary Table -->
 <table>
 <tr class="subhead"><th class="left"></th><th>Day</th><th>Night</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">Trips</td><td id="r_trips_day">39</td><td id="r_trips_night">54</td><td id="r_trips_ftd">93</td><td>1,368</td></tr>
 <tr><td class="left">Tonnage</td><td id="r_ton_day">936</td><td id="r_ton_night">1,417</td><td id="r_ton_ftd">2,353</td><td>32,757</td></tr>
 </table>
 <!-- Vehicle-wise Table -->
 <table>
 <tr class="subhead"><th class="left">Vehicle No</th><th>Day</th><th>Night</th><th>FTD Total</th><th>MTD</th></tr>
 <tr><td class="left">AP39UQ0095</td><td id="r_trip_ap39uq0095_day">0</td><td id="r_trip_ap39uq0095_night">0</td><td id="r_trip_ap39uq0095_ftd">0</td><td>57</td></tr>
 <tr><td class="left">AP39UQ0097</td><td id="r_trip_ap39uq0097_day">5</td><td id="r_trip_ap39uq0097_night">5</td><td id="r_trip_ap39uq0097_ftd">10</td><td>95</td></tr>
 <tr><td class="left">AP39UW9880</td><td id="r_trip_ap39uw9880_day">6</td><td id="r_trip_ap39uw9880_night">6</td><td id="r_trip_ap39uw9880_ftd">12</td><td>152</td></tr>
 <tr><td class="left">AP39UW9881</td><td id="r_trip_ap39uw9881_day">5</td><td id="r_trip_ap39uw9881_night">4</td><td id="r_trip_ap39uw9881_ftd">9</td><td>135</td></tr>
 <tr><td class="left">AP39UY4651</td><td id="r_trip_ap39uy4651_day">1</td><td id="r_trip_ap39uy4651_night">5</td><td id="r_trip_ap39uy4651_ftd">6</td><td>127</td></tr>
 <tr><td class="left">AP39UY4652</td><td id="r_trip_ap39uy4652_day">5</td><td id="r_trip_ap39uy4652_night">6</td><td id="r_trip_ap39uy4652_ftd">11</td><td>144</td></tr>
 <tr><td class="left">AP39WC0926</td><td id="r_trip_ap39wc0926_day">0</td><td id="r_trip_ap39wc0926_night">5</td><td id="r_trip_ap39wc0926_ftd">5</td><td>136</td></tr>
 <tr><td class="left">AP39WC0927</td><td id="r_trip_ap39wc0927_day">5</td><td id="r_trip_ap39wc0927_night">4</td><td id="r_trip_ap39wc0927_ftd">9</td><td>101</td></tr>
 <tr><td class="left">AP39WC0928</td><td id="r_trip_ap39wc0928_day">6</td><td id="r_trip_ap39wc0928_night">6</td><td id="r_trip_ap39wc0928_ftd">12</td><td>154</td></tr>
 <tr><td class="left">AP39WF2052</td><td id="r_trip_ap39wf2052_day">3</td><td id="r_trip_ap39wf2052_night">7</td><td id="r_trip_ap39wf2052_ftd">10</td><td>118</td></tr>
 <tr><td class="left">AP39WF2057</td><td id="r_trip_ap39wf2057_day">3</td><td id="r_trip_ap39wf2057_night">6</td><td id="r_trip_ap39wf2057_ftd">9</td><td>149</td></tr>
 <tr><td class="left">AP39WF2058</td><td id="r_trip_ap39wf2058_day">0</td><td id="r_trip_ap39wf2058_night">0</td><td id="r_trip_ap39wf2058_ftd">0</td><td>0</td></tr>
 <tr class="total"><td class="left">Total</td><td id="r_trips_day_total">39</td><td id="r_trips_night_total">54</td><td id="r_trips_ftd">93</td><td>1,368</td></tr>
 </table>
 </div>
 <div class="boulder-right">
 <div class="boxed">
 <h3>Production</h3>
 <table>
 <tr class="subhead"><th class="left">Product</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">10 MM</td><td id="r_prod_10mm">381.6</td><td>3722.4</td></tr>
 <tr><td class="left">20 MM</td><td id="r_prod_20mm">593.6</td><td>5790.4</td></tr>
 <tr><td class="left">V-Sand</td><td id="r_prod_vsand">296.8</td><td>2895.2</td></tr>
 <tr><td class="left">Railway Ballast</td><td id="r_prod_railballast">0</td><td>57</td></tr>
 <tr><td class="left">40 MM</td><td id="r_prod_40mm">0</td><td>0</td></tr>
 <tr><td class="left">Rivo Sand</td><td id="r_prod_rivosand">763.2</td><td>7444.8</td></tr>
 <tr><td class="left">Slurry</td><td id="r_prod_slurry">84.8</td><td>827.2</td></tr>
 <tr class="total"><td class="left">Total</td><td id="r_prod_total">2120</td><td>20,680</td></tr>
 </table>
 </div>
 <div class="boxed">
 <h3>Godown Stock</h3>
 <table>
 <tr class="subhead"><th class="left">Material</th><th>Quantity</th></tr>
 <tr><td class="left">10 MM</td><td id="r_stock_10mm">130</td></tr>
 <tr><td class="left">20 MM</td><td id="r_stock_20mm">4250</td></tr>
 <tr><td class="left">Rivo Sand</td><td id="r_stock_rivosand">18420</td></tr>
 <tr><td class="left">Railway Ballast</td><td id="r_stock_railballast">2000</td></tr>
 <tr><td class="left">40 MM</td><td id="r_stock_40mm">0</td></tr>
 <tr><td class="left">VSI</td><td id="r_stock_vsi">17235</td></tr>
 <tr><td class="left">GSB</td><td id="r_stock_gsb">0</td></tr>
 <tr class="total"><td class="left">Total</td><td id="r_stock_total">42,035</td></tr>
 </table>
 </div>
 </div>
 </div>
 <!-- Moved Machinery Availability and Achievement % to the end -->
 <div class="grid">
 <div>
 <h2>MACHINERY AVAILABILITY</h2>
 <table>
 <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>Performance %</th></tr>
 <tr><td class="left">Tippers Running</td><td id="r_tipper_running">5</td><td id="r_tipper_perf">115</td></tr>
 <tr><td class="left">Excavator Running</td><td id="r_excavator_running">2</td><td id="r_excavator_perf">71</td></tr>
 <tr><td class="left">Loader Running</td><td id="r_loader_running">1</td><td id="r_loader_perf">65</td></tr>
 <tr><td class="left">Rental Vehicle Available</td><td id="r_rental_vehicle">2</td><td id="r_rental_perf">72</td></tr>
 </table>
 </div>
 <div>
 <h2 class="achievement">ACHIEVEMENT %</h2>
 <table>
 <tr class="subhead"><th class="left">Parameter</th><th>FTD</th><th>MTD</th></tr>
 <tr><td class="left">Quarry</td><td id="r_quarry_ftd">68%</td><td id="r_quarry_mtd">74%</td></tr>
 <tr><td class="left">Plant</td><td id="r_plant_ftd">56%</td><td id="r_plant_mtd">68%</td></tr>
 <tr><td class="left">Machinery</td><td id="r_machinery_ftd">68%</td><td id="r_machinery_mtd">75%</td></tr>
 <tr><td class="left">Dispatch</td><td id="r_dispatch_ftd">43%</td><td id="r_dispatch_mtd">62%</td></tr>
 </table>
 </div>
 </div>
 </div>
</div>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script>
function generateReport() {
 generateAchievement();
 // Get values
 const mine = parseFloat(document.getElementById('mine_prod').value) || 0;
 const plant = parseFloat(document.getElementById('plant_prod').value) || 0;
 const day = parseInt(document.getElementById('trips_day').value) || 0;
 const night = parseInt(document.getElementById('trips_night').value) || 0;
 const boulder_dispatch = parseFloat(document.getElementById('boulder_dispatch_ftd').value) || 0;
 const dispatch_qty = parseFloat(document.getElementById('dispatch_qty_ftd').value) || 0;
 const basic_rev = parseFloat(document.getElementById('basic_rev_ftd').value) || 0;
 const total_rev = parseFloat(document.getElementById('total_rev_ftd').value) || 0;
 // Update trips day/night totals (fix for multiple elements)
 const tripsDayElements = document.querySelectorAll('[id^="r_trips_day"]');
 tripsDayElements.forEach(el => el.innerText = day);
 const tripsNightElements = document.querySelectorAll('[id^="r_trips_night"]');
 tripsNightElements.forEach(el => el.innerText = night);
 document.getElementById('r_trips_ftd').innerText = day + night;
 // Update all fields
 document.getElementById('r_mine_prod').innerText = mine.toLocaleString();
 document.getElementById('r_plant_prod').innerText = plant.toLocaleString();
 // Mine fields
 document.getElementById('r_compressors').innerText = document.getElementById('compressors').value;
 document.getElementById('r_nmr').innerText = document.getElementById('nmr').value;
 document.getElementById('r_holes').innerText = document.getElementById('holes').value;
 document.getElementById('r_feetage').innerText = document.getElementById('feetage').value;
 document.getElementById('r_recovery').innerText = document.getElementById('recovery').value + '%';
 document.getElementById('r_breaking').innerText = document.getElementById('breaking').value + '%';
 // Plant fields
 document.getElementById('r_run_hrs').innerText = document.getElementById('run_hrs').value;
 document.getElementById('r_tph').innerText = document.getElementById('tph').value;
 document.getElementById('r_maint_hrs').innerText = document.getElementById('maint_hrs').value;
 document.getElementById('r_break_hrs').innerText = document.getElementById('break_hrs').value;
 document.getElementById('r_power_hrs').innerText = document.getElementById('power_hrs').value;
 document.getElementById('r_jam_hrs').innerText = document.getElementById('jam_hrs').value;
 document.getElementById('r_nofeed_hrs').innerText = document.getElementById('nofeed_hrs').value;
 // Remarks
 document.getElementById('r_plant_remark').innerText = document.getElementById('plant_remark').value;
 // Boulder Transportation - Production
 document.getElementById('r_prod_10mm').innerText = document.getElementById('prod_10mm').value;
 document.getElementById('r_prod_20mm').innerText = document.getElementById('prod_20mm').value;
 document.getElementById('r_prod_vsand').innerText = document.getElementById('prod_vsand').value;
 document.getElementById('r_prod_railballast').innerText = document.getElementById('prod_railballast').value;
 document.getElementById('r_prod_40mm').innerText = document.getElementById('prod_40mm').value;
 document.getElementById('r_prod_rivosand').innerText = document.getElementById('prod_rivosand').value;
 document.getElementById('r_prod_slurry').innerText = document.getElementById('prod_slurry').value;
 document.getElementById('r_prod_total').innerText = document.getElementById('prod_total').value;
 // Boulder Transportation - Trips
 const vehicles = [
 {day: 'trip_ap39uq0095_day', night: 'trip_ap39uq0095_night', ftd: 'trip_ap39uq0095_ftd'},
 {day: 'trip_ap39uq0097_day', night: 'trip_ap39uq0097_night', ftd: 'trip_ap39uq0097_ftd'},
 {day: 'trip_ap39uw9880_day', night: 'trip_ap39uw9880_night', ftd: 'trip_ap39uw9880_ftd'},
 {day: 'trip_ap39uw9881_day', night: 'trip_ap39uw9881_night', ftd: 'trip_ap39uw9881_ftd'},
 {day: 'trip_ap39uy4651_day', night: 'trip_ap39uy4651_night', ftd: 'trip_ap39uy4651_ftd'},
 {day: 'trip_ap39uy4652_day', night: 'trip_ap39uy4652_night', ftd: 'trip_ap39uy4652_ftd'},
 {day: 'trip_ap39wc0926_day', night: 'trip_ap39wc0926_night', ftd: 'trip_ap39wc0926_ftd'},
 {day: 'trip_ap39wc0927_day', night: 'trip_ap39wc0927_night', ftd: 'trip_ap39wc0927_ftd'},
 {day: 'trip_ap39wc0928_day', night: 'trip_ap39wc0928_night', ftd: 'trip_ap39wc0928_ftd'},
 {day: 'trip_ap39wf2052_day', night: 'trip_ap39wf2052_night', ftd: 'trip_ap39wf2052_ftd'},
 {day: 'trip_ap39wf2057_day', night: 'trip_ap39wf2057_night', ftd: 'trip_ap39wf2057_ftd'},
 {day: 'trip_ap39wf2058_day', night: 'trip_ap39wf2058_night', ftd: 'trip_ap39wf2058_ftd'}
 ];
 vehicles.forEach(v => {
 const dayVal = parseInt(document.getElementById(v.day).value) || 0;
 const nightVal = parseInt(document.getElementById(v.night).value) || 0;
 const ftdVal = dayVal + nightVal;
 const vehicleCode = v.day.split('_')[1]; // e.g., 'ap39uq0095'
 document.getElementById(`r_trip_${vehicleCode}_day`).innerText = dayVal;
 document.getElementById(`r_trip_${vehicleCode}_night`).innerText = nightVal;
 document.getElementById(`r_trip_${vehicleCode}_ftd`).innerText = ftdVal;
 });
 // Tonnage
 document.getElementById('r_ton_day').innerText = document.getElementById('ton_day').value;
 document.getElementById('r_ton_night').innerText = document.getElementById('ton_night').value;
 document.getElementById('r_ton_ftd').innerText = document.getElementById('ton_ftd').value;
 // Godown Stock
 document.getElementById('r_stock_10mm').innerText = document.getElementById('stock_10mm').value;
 document.getElementById('r_stock_20mm').innerText = document.getElementById('stock_20mm').value;
 document.getElementById('r_stock_rivosand').innerText = document.getElementById('stock_rivosand').value;
 document.getElementById('r_stock_railballast').innerText = document.getElementById('stock_railballast').value;
 document.getElementById('r_stock_40mm').innerText = document.getElementById('stock_40mm').value;
 document.getElementById('r_stock_vsi').innerText = document.getElementById('stock_vsi').value;
 document.getElementById('r_stock_gsb').innerText = document.getElementById('stock_gsb').value;
 document.getElementById('r_stock_total').innerText = document.getElementById('stock_total').value.toLocaleString();
 // Summary
 // Executive Summary
 document.getElementById('sum_mine_ftd').innerText = mine.toLocaleString();
 document.getElementById('sum_plant_ftd').innerText = plant.toLocaleString();
 document.getElementById('sum_boulder_ftd').innerText = boulder_dispatch.toLocaleString();
 document.getElementById('sum_dispatch_ftd').innerText = dispatch_qty.toLocaleString();
 document.getElementById('sum_basic_rev_ftd').innerText = '₹' + basic_rev.toFixed(2);
 document.getElementById('sum_total_rev_ftd').innerText = '₹' + total_rev.toFixed(2);
 // Today's date
 const today = '13 December 2025';
 document.getElementById('today').innerText = today;
}
function generateAchievement() {
 // Machinery Availability
 document.getElementById('r_tipper_running').innerText = document.getElementById('tippers_running').value;
 document.getElementById('r_tipper_perf').innerText = document.getElementById('tippers_perf').value;
 document.getElementById('r_excavator_running').innerText = document.getElementById('excavator_running').value;
 document.getElementById('r_excavator_perf').innerText = document.getElementById('excavator_perf').value;
 document.getElementById('r_loader_running').innerText = document.getElementById('loader_running').value;
 document.getElementById('r_loader_perf').innerText = document.getElementById('loader_perf').value;
 document.getElementById('r_rental_vehicle').innerText = document.getElementById('rental_vehicle').value;
 document.getElementById('r_rental_perf').innerText = document.getElementById('rental_perf').value;
 // Achievement %
 document.getElementById('r_quarry_ftd').innerText = document.getElementById('quarry_ftd').value + '%';
 document.getElementById('r_quarry_mtd').innerText = document.getElementById('quarry_mtd').value + '%';
 document.getElementById('r_plant_ftd').innerText = document.getElementById('plant_ftd').value + '%';
 document.getElementById('r_plant_mtd').innerText = document.getElementById('plant_mtd').value + '%';
 document.getElementById('r_machinery_ftd').innerText = document.getElementById('machinery_ftd').value + '%';
 document.getElementById('r_machinery_mtd').innerText = document.getElementById('machinery_mtd').value + '%';
 document.getElementById('r_dispatch_ftd').innerText = document.getElementById('dispatch_ftd').value + '%';
 document.getElementById('r_dispatch_mtd').innerText = document.getElementById('dispatch_mtd').value + '%';
}
// Auto-update on input change (optional)
document.querySelectorAll('input').forEach(input => {
 input.addEventListener('input', generateReport);
});
// Run once on load
generateReport();
function shareReport() {
  const element = document.getElementById('report');
  const filename = 'Daily-Operations-Report-' + new Date().toISOString().split('T')[0] + '.png';
  html2canvas(element, {
    scale: 2,
    useCORS: true,
    backgroundColor: '#ffffff',
    width: element.scrollWidth,
    height: element.scrollHeight
  }).then(canvas => {
    canvas.toBlob(function(blob) {
      const file = new File([blob], filename, { type: 'image/png' });
      const filesArray = [file];
      if (navigator.canShare && navigator.canShare({ files: filesArray })) {
        navigator.share({
          title: 'Daily Operations Report - Mining & Plant',
          text: 'Please find attached the daily operations report image.',
          files: filesArray
        }).then(() => {
          console.log('Shared successfully');
        }).catch((error) => {
          console.log('Error sharing', error);
          // Fallback to download
          const link = document.createElement('a');
          link.download = filename;
          link.href = canvas.toDataURL();
          link.click();
        });
      } else {
        // Fallback: download the image
        const link = document.createElement('a');
        link.download = filename;
        link.href = canvas.toDataURL();
        link.click();
        alert('Image downloaded. You can now share it manually via WhatsApp.');
      }
    }, 'image/png', 0.98);
  }).catch((error) => {
    console.error('Error generating image:', error);
    alert('Failed to generate image. Please try printing instead.');
  });
}
</script>
</body>
</html>
